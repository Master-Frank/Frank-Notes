(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{446:function(s,t,a){"use strict";a.r(t);var e=a(9),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"使用vssue添加评论功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用vssue添加评论功能"}},[s._v("#")]),s._v(" 使用Vssue添加评论功能")]),s._v(" "),t("p",[s._v("vuepress的页面是“静态”的，没有数据库和后端 API 的支持。为静态页面添加评论功能，可以通过Github等代码托管平台提供的 OAuth API ，使用Vssue 插件让用户通过这些平台的帐号登录，将评论存储在这些平台的 Issue 系统中，并在页面中展示。")]),s._v(" "),t("p",[s._v("Vssue的官方文档：https://vssue.js.org/zh/guide/")]),s._v(" "),t("h2",{attrs:{id:"_1-安装插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装插件"}},[s._v("#")]),s._v(" 1. 安装插件")]),s._v(" "),t("p",[s._v("GitHub的 OAuth API有两个版本，区别如下：")]),s._v(" "),t("blockquote",[t("h4",{attrs:{id:"github-rest-api-v3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-rest-api-v3"}},[s._v("#")]),s._v(" Github REST API V3")]),s._v(" "),t("ul",[t("li",[s._v("Vssue API 包： "),t("a",{attrs:{href:"https://www.npmjs.com/package/@vssue/api-github-v3",target:"_blank",rel:"noopener noreferrer"}},[s._v("@vssue/api-github-v3"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("特点 / 缺点：\n"),t("ul",[t("li",[s._v("需要设置 "),t("a",{attrs:{href:"https://vssue.js.org/zh/options/#clientsecret",target:"_blank",rel:"noopener noreferrer"}},[s._v("clientSecret"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("评论无法排序")]),s._v(" "),t("li",[s._v("评论可以编辑")]),s._v(" "),t("li",[s._v("评论可以删除")]),s._v(" "),t("li",[s._v("可以不登录浏览评论，但 API 有调用频率限制")])])]),s._v(" "),t("li",[s._v("开发者参考： "),t("a",{attrs:{href:"https://developer.github.com/v3",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)])]),s._v(" "),t("h4",{attrs:{id:"github-graphql-api-v4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-graphql-api-v4"}},[s._v("#")]),s._v(" Github GraphQL API V4")]),s._v(" "),t("ul",[t("li",[s._v("Vssue API 包： "),t("a",{attrs:{href:"https://www.npmjs.com/package/@vssue/api-github-v4",target:"_blank",rel:"noopener noreferrer"}},[s._v("@vssue/api-github-v4"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("特点 / 缺点：\n"),t("ul",[t("li",[s._v("需要设置 "),t("a",{attrs:{href:"https://vssue.js.org/zh/options/#clientsecret",target:"_blank",rel:"noopener noreferrer"}},[s._v("clientSecret"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("评论可以排序")]),s._v(" "),t("li",[s._v("评论可以编辑")]),s._v(" "),t("li",[s._v("评论可以删除")]),s._v(" "),t("li",[s._v("要求登陆后才能浏览评论")])])]),s._v(" "),t("li",[s._v("开发者参考： "),t("a",{attrs:{href:"https://developer.github.com/v4",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)])])]),s._v(" "),t("p",[s._v("按照你的需要选择版本。这里以v4为例。")]),s._v(" "),t("p",[s._v("在vueprees的根目录打开Git Bash，输入下面的命令")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @vssue/vuepress-plugin-vssue\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @vssue/api-github-v4\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果使用v3，上一行改为 npm install @vssue/api-github-v3 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_2-创建github-oauth-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建github-oauth-app"}},[s._v("#")]),s._v(" 2. 创建Github OAuth App")]),s._v(" "),t("p",[s._v("打开Github，点击右上角的头像，点击setting。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111290931368.png",alt:"image-20211129093152166"}})]),s._v(" "),t("p",[s._v("向下拉，找到Developer settings。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111290932380.png",alt:"image-20211129093253140"}})]),s._v(" "),t("p",[s._v("点击OAuth Apps，然后点击中间的"),t("code",[s._v("Register a new application")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111290934354.png",alt:"image-20211129093444197"}})]),s._v(" "),t("p",[s._v("输入OAuth App的名字，还有你的vuepress博客的访问地址，点击Register application。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111290939000.png",alt:"image-20211129093948825"}})]),s._v(" "),t("p",[s._v("点击Generate a new client secret，需要输入身份验证，然后会生成Client secrets")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111290942644.png",alt:"image-20211129094224385"}})]),s._v(" "),t("p",[s._v("妥善保存Client ID和Client secret，下一步中要用。另外Client secret只会出现一次。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111290948536.png",alt:"image-20211129094836258"}})]),s._v(" "),t("h2",{attrs:{id:"_3-配置插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置插件"}},[s._v("#")]),s._v(" 3. 配置插件")]),s._v(" "),t("p",[s._v("打开"),t("code",[s._v("docs/.vuepress/config/plugins.js")]),s._v("，在里面添加下面的配置。按照注释修改里面的信息。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vssue/vuepress-plugin-vssue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 `platform` 而不是 `api`")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("platform")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'github-v4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//如果使用github-v3，这里改为github")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("locale")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zh'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//语言：中文")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 其他的 Vssue 配置")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("owner")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'OWNER_OF_REPO'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//你的Gihub用户名")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("repo")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NAME_OF_REPO'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//你的vuepress所在仓库名称")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("clientId")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YOUR_CLIENT_ID'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//OAuth app的Client ID")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("clientSecret")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YOUR_CLIENT_SECRET'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//OAuth app的Client secret")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("配置完成就可以正常使用了")]),s._v(" "),t("h2",{attrs:{id:"_4-页面添加评论功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-页面添加评论功能"}},[s._v("#")]),s._v(" 4. 页面添加评论功能")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("markdown文章中")]),s._v("，需要添加评论区的位置输入")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("Vssue")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可使用。如果需要自定义标题，可以输入")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("Vssue")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(":title")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("自定义标题"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("开启后的效果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Master-Frank/Image-hosting/img/202111291104058.png",alt:"image-20211129110426913"}})]),s._v(" "),t("h2",{attrs:{id:"_5-自定义样式变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-自定义样式变量"}},[s._v("#")]),s._v(" 5. 自定义样式变量")]),s._v(" "),t("p",[s._v("打开"),t("code",[s._v("docs/.vuepress/styles/index.styl")]),s._v("，添加下面的样式变量可以使 Vssue 的样式变量与 VuePress 的样式变量相等：")]),s._v(" "),t("div",{staticClass:"language-stylus line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-stylus"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable-declaration"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vssue-theme-color")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v(" $accentColor "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//主题颜色")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable-declaration"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vssue-text-color")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v(" $textColor "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文字颜色")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable-declaration"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vssue-border-color")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v(" $borderColor  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//边框颜色")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable-declaration"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vssue-breakpoint-mobile")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v(" $MQMobile  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 切换为移动端模式的屏幕宽度")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如果想要自定义，可以在"),t("code",[s._v("docs/.vuepress/styles/palette.styl")]),s._v("中修改，示例如下：")]),s._v(" "),t("div",{staticClass:"language-stylus line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-stylus"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable-declaration"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$accentColor")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token color"}},[s._v("blue")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token variable-declaration"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vssue-theme-color")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token color"}},[s._v("red")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("Vssue")],1)}),[],!1,null,null,null);t.default=r.exports}}]);